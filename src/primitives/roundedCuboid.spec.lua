-- ROBLOX NOTE: no upstream
local JestGlobals = require("@DevPackages/JestGlobals")
local test, expect = JestGlobals.test, JestGlobals.expect

local roundedCuboid = require("./init").roundedCuboid
local geom3 = require("../geometries/geom3")
local comparePolygonsAsPoints = require("../../test/helpers/comparePolygonsAsPoints")
test("roundedCuboid (defaults)", function()
	local obs = roundedCuboid()
	local pts = geom3.toPoints(obs)
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toEqual(614)
end)
test("roundedCuboid (zero size)", function()
	local obs = roundedCuboid({ size = { 1, 1, 0 } })
	local pts = geom3.toPoints(obs)
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toBe(0)
end)
test("roundedCuboid (zero radius)", function()
	local obs = roundedCuboid({ roundRadius = 0 })
	local pts = geom3.toPoints(obs)
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toEqual(6)
end)
test("roundedCuboid (options)", function()
	-- test segments
	local obs = roundedCuboid({ segments = 8 })
	local pts = geom3.toPoints(obs)
	local exp = {}
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toBe(62) -- test center
	obs = roundedCuboid({ center = { 4, 5, 6 }, segments = 8 })
	pts = geom3.toPoints(obs)
	exp = {}
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toBe(62) -- test size
	obs = roundedCuboid({ size = { 8, 10, 12 }, segments = 8 })
	pts = geom3.toPoints(obs)
	exp = {
		{
			{ 4, 4.8, -5.8 },
			{ 3.9414213562373095, 4.941421356237309, -5.8 },
			{ 3.9414213562373095, 4.941421356237309, 5.8 },
			{ 4, 4.8, 5.8 },
		},
		{
			{ 3.9414213562373095, 4.941421356237309, -5.8 },
			{ 3.8, 5, -5.8 },
			{ 3.8, 5, 5.8 },
			{ 3.9414213562373095, 4.941421356237309, 5.8 },
		},
		{ { 3.8, 5, -5.8 }, { -3.8, 5, -5.8 }, { -3.8, 5, 5.8 }, { 3.8, 5, 5.8 } },
		{
			{ -3.8, 5, -5.8 },
			{ -3.9414213562373095, 4.941421356237309, -5.8 },
			{ -3.9414213562373095, 4.941421356237309, 5.8 },
			{ -3.8, 5, 5.8 },
		},
		{
			{ -3.9414213562373095, 4.941421356237309, -5.8 },
			{ -4, 4.8, -5.8 },
			{ -4, 4.8, 5.8 },
			{ -3.9414213562373095, 4.941421356237309, 5.8 },
		},
		{ { -4, 4.8, -5.8 }, { -4, -4.8, -5.8 }, { -4, -4.8, 5.8 }, { -4, 4.8, 5.8 } },
		{
			{ -4, -4.8, -5.8 },
			{ -3.9414213562373095, -4.941421356237309, -5.8 },
			{ -3.9414213562373095, -4.941421356237309, 5.8 },
			{ -4, -4.8, 5.8 },
		},
		{
			{ -3.9414213562373095, -4.941421356237309, -5.8 },
			{ -3.8, -5, -5.8 },
			{ -3.8, -5, 5.8 },
			{ -3.9414213562373095, -4.941421356237309, 5.8 },
		},
		{ { -3.8, -5, -5.8 }, { 3.8, -5, -5.8 }, { 3.8, -5, 5.8 }, { -3.8, -5, 5.8 } },
		{
			{ 3.8, -5, -5.8 },
			{ 3.9414213562373095, -4.941421356237309, -5.8 },
			{ 3.9414213562373095, -4.941421356237309, 5.8 },
			{ 3.8, -5, 5.8 },
		},
		{
			{ 3.9414213562373095, -4.941421356237309, -5.8 },
			{ 4, -4.8, -5.8 },
			{ 4, -4.8, 5.8 },
			{ 3.9414213562373095, -4.941421356237309, 5.8 },
		},
		{ { 4, -4.8, -5.8 }, { 4, 4.8, -5.8 }, { 4, 4.8, 5.8 }, { 4, -4.8, 5.8 } },
		{
			{ 4, 4.8, 5.8 },
			{ 3.9414213562373095, 4.941421356237309, 5.8 },
			{ 3.9414213562373095, 4.8, 5.94142135623731 },
		},
		{
			{ 3.9414213562373095, 4.8, 5.94142135623731 },
			{ 3.9414213562373095, 4.941421356237309, 5.8 },
			{ 3.8, 4.941421356237309, 5.94142135623731 },
		},
		{
			{ 3.9414213562373095, 4.941421356237309, 5.8 },
			{ 3.8, 5, 5.8 },
			{ 3.8, 4.941421356237309, 5.94142135623731 },
		},
		{
			{ -3.8, 5, 5.8 },
			{ -3.9414213562373095, 4.941421356237309, 5.8 },
			{ -3.8, 4.941421356237309, 5.94142135623731 },
		},
		{
			{ -3.8, 4.941421356237309, 5.94142135623731 },
			{ -3.9414213562373095, 4.941421356237309, 5.8 },
			{ -3.9414213562373095, 4.8, 5.94142135623731 },
		},
		{
			{ -3.9414213562373095, 4.941421356237309, 5.8 },
			{ -4, 4.8, 5.8 },
			{ -3.9414213562373095, 4.8, 5.94142135623731 },
		},
		{
			{ -4, -4.8, 5.8 },
			{ -3.9414213562373095, -4.941421356237309, 5.8 },
			{ -3.9414213562373095, -4.8, 5.94142135623731 },
		},
		{
			{ -3.9414213562373095, -4.8, 5.94142135623731 },
			{ -3.9414213562373095, -4.941421356237309, 5.8 },
			{ -3.8, -4.941421356237309, 5.94142135623731 },
		},
		{
			{ -3.9414213562373095, -4.941421356237309, 5.8 },
			{ -3.8, -5, 5.8 },
			{ -3.8, -4.941421356237309, 5.94142135623731 },
		},
		{
			{ 3.8, -5, 5.8 },
			{ 3.9414213562373095, -4.941421356237309, 5.8 },
			{ 3.8, -4.941421356237309, 5.94142135623731 },
		},
		{
			{ 3.8, -4.941421356237309, 5.94142135623731 },
			{ 3.9414213562373095, -4.941421356237309, 5.8 },
			{ 3.9414213562373095, -4.8, 5.94142135623731 },
		},
		{
			{ 3.9414213562373095, -4.941421356237309, 5.8 },
			{ 4, -4.8, 5.8 },
			{ 3.9414213562373095, -4.8, 5.94142135623731 },
		},
		{
			{ 3.8, 5, 5.8 },
			{ -3.8, 5, 5.8 },
			{ -3.8, 4.941421356237309, 5.94142135623731 },
			{ 3.8, 4.941421356237309, 5.94142135623731 },
		},
		{
			{ -4, 4.8, 5.8 },
			{ -4, -4.8, 5.8 },
			{ -3.9414213562373095, -4.8, 5.94142135623731 },
			{ -3.9414213562373095, 4.8, 5.94142135623731 },
		},
		{
			{ -3.8, -5, 5.8 },
			{ 3.8, -5, 5.8 },
			{ 3.8, -4.941421356237309, 5.94142135623731 },
			{ -3.8, -4.941421356237309, 5.94142135623731 },
		},
		{
			{ 4, -4.8, 5.8 },
			{ 4, 4.8, 5.8 },
			{ 3.9414213562373095, 4.8, 5.94142135623731 },
			{ 3.9414213562373095, -4.8, 5.94142135623731 },
		},
		{
			{ 4, -4.8, -5.8 },
			{ 3.9414213562373095, -4.941421356237309, -5.8 },
			{ 3.9414213562373095, -4.8, -5.94142135623731 },
		},
		{
			{ 3.9414213562373095, -4.8, -5.94142135623731 },
			{ 3.9414213562373095, -4.941421356237309, -5.8 },
			{ 3.8, -4.941421356237309, -5.94142135623731 },
		},
		{
			{ 3.9414213562373095, -4.941421356237309, -5.8 },
			{ 3.8, -5, -5.8 },
			{ 3.8, -4.941421356237309, -5.94142135623731 },
		},
		{
			{ -3.8, -5, -5.8 },
			{ -3.9414213562373095, -4.941421356237309, -5.8 },
			{ -3.8, -4.941421356237309, -5.94142135623731 },
		},
		{
			{ -3.8, -4.941421356237309, -5.94142135623731 },
			{ -3.9414213562373095, -4.941421356237309, -5.8 },
			{ -3.9414213562373095, -4.8, -5.94142135623731 },
		},
		{
			{ -3.9414213562373095, -4.941421356237309, -5.8 },
			{ -4, -4.8, -5.8 },
			{ -3.9414213562373095, -4.8, -5.94142135623731 },
		},
		{
			{ -4, 4.8, -5.8 },
			{ -3.9414213562373095, 4.941421356237309, -5.8 },
			{ -3.9414213562373095, 4.8, -5.94142135623731 },
		},
		{
			{ -3.9414213562373095, 4.8, -5.94142135623731 },
			{ -3.9414213562373095, 4.941421356237309, -5.8 },
			{ -3.8, 4.941421356237309, -5.94142135623731 },
		},
		{
			{ -3.9414213562373095, 4.941421356237309, -5.8 },
			{ -3.8, 5, -5.8 },
			{ -3.8, 4.941421356237309, -5.94142135623731 },
		},
		{
			{ 3.8, 5, -5.8 },
			{ 3.9414213562373095, 4.941421356237309, -5.8 },
			{ 3.8, 4.941421356237309, -5.94142135623731 },
		},
		{
			{ 3.8, 4.941421356237309, -5.94142135623731 },
			{ 3.9414213562373095, 4.941421356237309, -5.8 },
			{ 3.9414213562373095, 4.8, -5.94142135623731 },
		},
		{
			{ 3.9414213562373095, 4.941421356237309, -5.8 },
			{ 4, 4.8, -5.8 },
			{ 3.9414213562373095, 4.8, -5.94142135623731 },
		},
		{
			{ 3.8, -5, -5.8 },
			{ -3.8, -5, -5.8 },
			{ -3.8, -4.941421356237309, -5.94142135623731 },
			{ 3.8, -4.941421356237309, -5.94142135623731 },
		},
		{
			{ -4, -4.8, -5.8 },
			{ -4, 4.8, -5.8 },
			{ -3.9414213562373095, 4.8, -5.94142135623731 },
			{ -3.9414213562373095, -4.8, -5.94142135623731 },
		},
		{
			{ -3.8, 5, -5.8 },
			{ 3.8, 5, -5.8 },
			{ 3.8, 4.941421356237309, -5.94142135623731 },
			{ -3.8, 4.941421356237309, -5.94142135623731 },
		},
		{
			{ 4, 4.8, -5.8 },
			{ 4, -4.8, -5.8 },
			{ 3.9414213562373095, -4.8, -5.94142135623731 },
			{ 3.9414213562373095, 4.8, -5.94142135623731 },
		},
		{
			{ 3.9414213562373095, 4.8, 5.94142135623731 },
			{ 3.8, 4.941421356237309, 5.94142135623731 },
			{ 3.8, 4.8, 6 },
		},
		{
			{ -3.8, 4.941421356237309, 5.94142135623731 },
			{ -3.9414213562373095, 4.8, 5.94142135623731 },
			{ -3.8, 4.8, 6 },
		},
		{
			{ -3.9414213562373095, -4.8, 5.94142135623731 },
			{ -3.8, -4.941421356237309, 5.94142135623731 },
			{ -3.8, -4.8, 6 },
		},
		{
			{ 3.8, -4.941421356237309, 5.94142135623731 },
			{ 3.9414213562373095, -4.8, 5.94142135623731 },
			{ 3.8, -4.8, 6 },
		},
		{
			{ 3.8, 4.941421356237309, 5.94142135623731 },
			{ -3.8, 4.941421356237309, 5.94142135623731 },
			{ -3.8, 4.8, 6 },
			{ 3.8, 4.8, 6 },
		},
		{
			{ -3.9414213562373095, 4.8, 5.94142135623731 },
			{ -3.9414213562373095, -4.8, 5.94142135623731 },
			{ -3.8, -4.8, 6 },
			{ -3.8, 4.8, 6 },
		},
		{
			{ -3.8, -4.941421356237309, 5.94142135623731 },
			{ 3.8, -4.941421356237309, 5.94142135623731 },
			{ 3.8, -4.8, 6 },
			{ -3.8, -4.8, 6 },
		},
		{
			{ 3.9414213562373095, -4.8, 5.94142135623731 },
			{ 3.9414213562373095, 4.8, 5.94142135623731 },
			{ 3.8, 4.8, 6 },
			{ 3.8, -4.8, 6 },
		},
		{
			{ 3.9414213562373095, -4.8, -5.94142135623731 },
			{ 3.8, -4.941421356237309, -5.94142135623731 },
			{ 3.8, -4.8, -6 },
		},
		{
			{ -3.8, -4.941421356237309, -5.94142135623731 },
			{ -3.9414213562373095, -4.8, -5.94142135623731 },
			{ -3.8, -4.8, -6 },
		},
		{
			{ -3.9414213562373095, 4.8, -5.94142135623731 },
			{ -3.8, 4.941421356237309, -5.94142135623731 },
			{ -3.8, 4.8, -6 },
		},
		{
			{ 3.8, 4.941421356237309, -5.94142135623731 },
			{ 3.9414213562373095, 4.8, -5.94142135623731 },
			{ 3.8, 4.8, -6 },
		},
		{
			{ 3.8, -4.941421356237309, -5.94142135623731 },
			{ -3.8, -4.941421356237309, -5.94142135623731 },
			{ -3.8, -4.8, -6 },
			{ 3.8, -4.8, -6 },
		},
		{
			{ -3.9414213562373095, -4.8, -5.94142135623731 },
			{ -3.9414213562373095, 4.8, -5.94142135623731 },
			{ -3.8, 4.8, -6 },
			{ -3.8, -4.8, -6 },
		},
		{
			{ -3.8, 4.941421356237309, -5.94142135623731 },
			{ 3.8, 4.941421356237309, -5.94142135623731 },
			{ 3.8, 4.8, -6 },
			{ -3.8, 4.8, -6 },
		},
		{
			{ 3.9414213562373095, 4.8, -5.94142135623731 },
			{ 3.9414213562373095, -4.8, -5.94142135623731 },
			{ 3.8, -4.8, -6 },
			{ 3.8, 4.8, -6 },
		},
		{ { 3.8, 4.8, 6 }, { -3.8, 4.8, 6 }, { -3.8, -4.8, 6 }, { 3.8, -4.8, 6 } },
		{ { 3.8, -4.8, -6 }, { -3.8, -4.8, -6 }, { -3.8, 4.8, -6 }, { 3.8, 4.8, -6 } },
	}
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toEqual(62)
	expect(comparePolygonsAsPoints(pts, exp)).toBe(true) -- test roundRadius
	obs = roundedCuboid({ size = { 8, 10, 12 }, roundRadius = 2, segments = 8 })
	pts = geom3.toPoints(obs)
	exp = {
		{
			{ 4, 3, -4 },
			{ 3.414213562373095, 4.414213562373095, -4 },
			{ 3.414213562373095, 4.414213562373095, 4 },
			{ 4, 3, 4 },
		},
		{
			{ 3.414213562373095, 4.414213562373095, -4 },
			{ 2, 5, -4 },
			{ 2, 5, 4 },
			{ 3.414213562373095, 4.414213562373095, 4 },
		},
		{
			{ 2, 5, -4 },
			{ -1.9999999999999998, 5, -4 },
			{ -1.9999999999999998, 5, 4 },
			{ 2, 5, 4 },
		},
		{
			{ -1.9999999999999998, 5, -4 },
			{ -3.414213562373095, 4.414213562373095, -4 },
			{ -3.414213562373095, 4.414213562373095, 4 },
			{ -1.9999999999999998, 5, 4 },
		},
		{
			{ -3.414213562373095, 4.414213562373095, -4 },
			{ -4, 3.0000000000000004, -4 },
			{ -4, 3.0000000000000004, 4 },
			{ -3.414213562373095, 4.414213562373095, 4 },
		},
		{
			{ -4, 3.0000000000000004, -4 },
			{ -4, -2.9999999999999996, -4 },
			{ -4, -2.9999999999999996, 4 },
			{ -4, 3.0000000000000004, 4 },
		},
		{
			{ -4, -2.9999999999999996, -4 },
			{ -3.414213562373095, -4.414213562373095, -4 },
			{ -3.414213562373095, -4.414213562373095, 4 },
			{ -4, -2.9999999999999996, 4 },
		},
		{
			{ -3.414213562373095, -4.414213562373095, -4 },
			{ -2.0000000000000004, -5, -4 },
			{ -2.0000000000000004, -5, 4 },
			{ -3.414213562373095, -4.414213562373095, 4 },
		},
		{
			{ -2.0000000000000004, -5, -4 },
			{ 1.9999999999999996, -5, -4 },
			{ 1.9999999999999996, -5, 4 },
			{ -2.0000000000000004, -5, 4 },
		},
		{
			{ 1.9999999999999996, -5, -4 },
			{ 3.414213562373095, -4.414213562373095, -4 },
			{ 3.414213562373095, -4.414213562373095, 4 },
			{ 1.9999999999999996, -5, 4 },
		},
		{
			{ 3.414213562373095, -4.414213562373095, -4 },
			{ 4, -3.0000000000000004, -4 },
			{ 4, -3.0000000000000004, 4 },
			{ 3.414213562373095, -4.414213562373095, 4 },
		},
		{
			{ 4, -3.0000000000000004, -4 },
			{ 4, 3, -4 },
			{ 4, 3, 4 },
			{ 4, -3.0000000000000004, 4 },
		},
		{
			{ 4, 3, 4 },
			{ 3.414213562373095, 4.414213562373095, 4 },
			{ 3.414213562373095, 3, 5.414213562373095 },
		},
		{
			{ 3.414213562373095, 3, 5.414213562373095 },
			{ 3.414213562373095, 4.414213562373095, 4 },
			{ 2, 4.414213562373095, 5.414213562373095 },
		},
		{
			{ 3.414213562373095, 4.414213562373095, 4 },
			{ 2, 5, 4 },
			{ 2, 4.414213562373095, 5.414213562373095 },
		},
		{
			{ -1.9999999999999998, 5, 4 },
			{ -3.414213562373095, 4.414213562373095, 4 },
			{ -2, 4.414213562373095, 5.414213562373095 },
		},
		{
			{ -2, 4.414213562373095, 5.414213562373095 },
			{ -3.414213562373095, 4.414213562373095, 4 },
			{ -3.414213562373095, 3, 5.414213562373095 },
		},
		{
			{ -3.414213562373095, 4.414213562373095, 4 },
			{ -4, 3.0000000000000004, 4 },
			{ -3.414213562373095, 3, 5.414213562373095 },
		},
		{
			{ -4, -2.9999999999999996, 4 },
			{ -3.414213562373095, -4.414213562373095, 4 },
			{ -3.414213562373095, -3, 5.414213562373095 },
		},
		{
			{ -3.414213562373095, -3, 5.414213562373095 },
			{ -3.414213562373095, -4.414213562373095, 4 },
			{ -2.0000000000000004, -4.414213562373095, 5.414213562373095 },
		},
		{
			{ -3.414213562373095, -4.414213562373095, 4 },
			{ -2.0000000000000004, -5, 4 },
			{ -2.0000000000000004, -4.414213562373095, 5.414213562373095 },
		},
		{
			{ 1.9999999999999996, -5, 4 },
			{ 3.414213562373095, -4.414213562373095, 4 },
			{ 1.9999999999999998, -4.414213562373095, 5.414213562373095 },
		},
		{
			{ 1.9999999999999998, -4.414213562373095, 5.414213562373095 },
			{ 3.414213562373095, -4.414213562373095, 4 },
			{ 3.414213562373095, -3.0000000000000004, 5.414213562373095 },
		},
		{
			{ 3.414213562373095, -4.414213562373095, 4 },
			{ 4, -3.0000000000000004, 4 },
			{ 3.414213562373095, -3.0000000000000004, 5.414213562373095 },
		},
		{
			{ 2, 5, 4 },
			{ -1.9999999999999998, 5, 4 },
			{ -2, 4.414213562373095, 5.414213562373095 },
			{ 2, 4.414213562373095, 5.414213562373095 },
		},
		{
			{ -4, 3.0000000000000004, 4 },
			{ -4, -2.9999999999999996, 4 },
			{ -3.414213562373095, -3, 5.414213562373095 },
			{ -3.414213562373095, 3, 5.414213562373095 },
		},
		{
			{ -2.0000000000000004, -5, 4 },
			{ 1.9999999999999996, -5, 4 },
			{ 1.9999999999999998, -4.414213562373095, 5.414213562373095 },
			{ -2.0000000000000004, -4.414213562373095, 5.414213562373095 },
		},
		{
			{ 4, -3.0000000000000004, 4 },
			{ 4, 3, 4 },
			{ 3.414213562373095, 3, 5.414213562373095 },
			{ 3.414213562373095, -3.0000000000000004, 5.414213562373095 },
		},
		{
			{ 4, -3.0000000000000004, -4 },
			{ 3.414213562373095, -4.414213562373095, -4 },
			{ 3.414213562373095, -3.0000000000000004, -5.414213562373095 },
		},
		{
			{ 3.414213562373095, -3.0000000000000004, -5.414213562373095 },
			{ 3.414213562373095, -4.414213562373095, -4 },
			{ 1.9999999999999998, -4.414213562373095, -5.414213562373095 },
		},
		{
			{ 3.414213562373095, -4.414213562373095, -4 },
			{ 1.9999999999999996, -5, -4 },
			{ 1.9999999999999998, -4.414213562373095, -5.414213562373095 },
		},
		{
			{ -2.0000000000000004, -5, -4 },
			{ -3.414213562373095, -4.414213562373095, -4 },
			{ -2.0000000000000004, -4.414213562373095, -5.414213562373095 },
		},
		{
			{ -2.0000000000000004, -4.414213562373095, -5.414213562373095 },
			{ -3.414213562373095, -4.414213562373095, -4 },
			{ -3.414213562373095, -3, -5.414213562373095 },
		},
		{
			{ -3.414213562373095, -4.414213562373095, -4 },
			{ -4, -2.9999999999999996, -4 },
			{ -3.414213562373095, -3, -5.414213562373095 },
		},
		{
			{ -4, 3.0000000000000004, -4 },
			{ -3.414213562373095, 4.414213562373095, -4 },
			{ -3.414213562373095, 3, -5.414213562373095 },
		},
		{
			{ -3.414213562373095, 3, -5.414213562373095 },
			{ -3.414213562373095, 4.414213562373095, -4 },
			{ -2, 4.414213562373095, -5.414213562373095 },
		},
		{
			{ -3.414213562373095, 4.414213562373095, -4 },
			{ -1.9999999999999998, 5, -4 },
			{ -2, 4.414213562373095, -5.414213562373095 },
		},
		{
			{ 2, 5, -4 },
			{ 3.414213562373095, 4.414213562373095, -4 },
			{ 2, 4.414213562373095, -5.414213562373095 },
		},
		{
			{ 2, 4.414213562373095, -5.414213562373095 },
			{ 3.414213562373095, 4.414213562373095, -4 },
			{ 3.414213562373095, 3, -5.414213562373095 },
		},
		{
			{ 3.414213562373095, 4.414213562373095, -4 },
			{ 4, 3, -4 },
			{ 3.414213562373095, 3, -5.414213562373095 },
		},
		{
			{ 1.9999999999999996, -5, -4 },
			{ -2.0000000000000004, -5, -4 },
			{ -2.0000000000000004, -4.414213562373095, -5.414213562373095 },
			{ 1.9999999999999998, -4.414213562373095, -5.414213562373095 },
		},
		{
			{ -4, -2.9999999999999996, -4 },
			{ -4, 3.0000000000000004, -4 },
			{ -3.414213562373095, 3, -5.414213562373095 },
			{ -3.414213562373095, -3, -5.414213562373095 },
		},
		{
			{ -1.9999999999999998, 5, -4 },
			{ 2, 5, -4 },
			{ 2, 4.414213562373095, -5.414213562373095 },
			{ -2, 4.414213562373095, -5.414213562373095 },
		},
		{
			{ 4, 3, -4 },
			{ 4, -3.0000000000000004, -4 },
			{ 3.414213562373095, -3.0000000000000004, -5.414213562373095 },
			{ 3.414213562373095, 3, -5.414213562373095 },
		},
		{
			{ 3.414213562373095, 3, 5.414213562373095 },
			{ 2, 4.414213562373095, 5.414213562373095 },
			{ 2, 3, 6 },
		},
		{
			{ -2, 4.414213562373095, 5.414213562373095 },
			{ -3.414213562373095, 3, 5.414213562373095 },
			{ -2, 3, 6 },
		},
		{
			{ -3.414213562373095, -3, 5.414213562373095 },
			{ -2.0000000000000004, -4.414213562373095, 5.414213562373095 },
			{ -2, -3, 6 },
		},
		{
			{ 1.9999999999999998, -4.414213562373095, 5.414213562373095 },
			{ 3.414213562373095, -3.0000000000000004, 5.414213562373095 },
			{ 2, -3, 6 },
		},
		{
			{ 2, 4.414213562373095, 5.414213562373095 },
			{ -2, 4.414213562373095, 5.414213562373095 },
			{ -2, 3, 6 },
			{ 2, 3, 6 },
		},
		{
			{ -3.414213562373095, 3, 5.414213562373095 },
			{ -3.414213562373095, -3, 5.414213562373095 },
			{ -2, -3, 6 },
			{ -2, 3, 6 },
		},
		{
			{ -2.0000000000000004, -4.414213562373095, 5.414213562373095 },
			{ 1.9999999999999998, -4.414213562373095, 5.414213562373095 },
			{ 2, -3, 6 },
			{ -2, -3, 6 },
		},
		{
			{ 3.414213562373095, -3.0000000000000004, 5.414213562373095 },
			{ 3.414213562373095, 3, 5.414213562373095 },
			{ 2, 3, 6 },
			{ 2, -3, 6 },
		},
		{
			{ 3.414213562373095, -3.0000000000000004, -5.414213562373095 },
			{ 1.9999999999999998, -4.414213562373095, -5.414213562373095 },
			{ 2, -3, -6 },
		},
		{
			{ -2.0000000000000004, -4.414213562373095, -5.414213562373095 },
			{ -3.414213562373095, -3, -5.414213562373095 },
			{ -2, -3, -6 },
		},
		{
			{ -3.414213562373095, 3, -5.414213562373095 },
			{ -2, 4.414213562373095, -5.414213562373095 },
			{ -2, 3, -6 },
		},
		{
			{ 2, 4.414213562373095, -5.414213562373095 },
			{ 3.414213562373095, 3, -5.414213562373095 },
			{ 2, 3, -6 },
		},
		{
			{ 1.9999999999999998, -4.414213562373095, -5.414213562373095 },
			{ -2.0000000000000004, -4.414213562373095, -5.414213562373095 },
			{ -2, -3, -6 },
			{ 2, -3, -6 },
		},
		{
			{ -3.414213562373095, -3, -5.414213562373095 },
			{ -3.414213562373095, 3, -5.414213562373095 },
			{ -2, 3, -6 },
			{ -2, -3, -6 },
		},
		{
			{ -2, 4.414213562373095, -5.414213562373095 },
			{ 2, 4.414213562373095, -5.414213562373095 },
			{ 2, 3, -6 },
			{ -2, 3, -6 },
		},
		{
			{ 3.414213562373095, 3, -5.414213562373095 },
			{ 3.414213562373095, -3.0000000000000004, -5.414213562373095 },
			{ 2, -3, -6 },
			{ 2, 3, -6 },
		},
		{ { 2, 3, 6 }, { -2, 3, 6 }, { -2, -3, 6 }, { 2, -3, 6 } },
		{ { 2, -3, -6 }, { -2, -3, -6 }, { -2, 3, -6 }, { 2, 3, -6 } },
	}
	expect(function()
		return geom3.validate(obs)
	end)["not"].toThrow()
	expect(#pts).toEqual(62)
	expect(comparePolygonsAsPoints(pts, exp)).toBe(true)
end)
